{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.215.0"},"children":{"McSimpleStack":{"id":"McSimpleStack","path":"McSimpleStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.215.0"},"children":{"TheVpc":{"id":"TheVpc","path":"McSimpleStack/TheVpc","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.215.0","metadata":[{"ipAddresses":"*","maxAzs":"*","subnetConfiguration":[{"cidrMask":"*","name":"*","subnetType":"Public"}]}]},"children":{"Resource":{"id":"Resource","path":"McSimpleStack/TheVpc/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.100.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"McSimpleStack/TheVpc"}]}}},"PublicSubnetSubnet1":{"id":"PublicSubnetSubnet1","path":"McSimpleStack/TheVpc/PublicSubnetSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.215.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]},"children":{"Subnet":{"id":"Subnet","path":"McSimpleStack/TheVpc/PublicSubnetSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-2a","cidrBlock":"10.100.0.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"PublicSubnet"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"McSimpleStack/TheVpc/PublicSubnetSubnet1"}],"vpcId":{"Ref":"TheVpc7ED17D3E"}}}},"Acl":{"id":"Acl","path":"McSimpleStack/TheVpc/PublicSubnetSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"McSimpleStack/TheVpc/PublicSubnetSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"McSimpleStack/TheVpc/PublicSubnetSubnet1"}],"vpcId":{"Ref":"TheVpc7ED17D3E"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"McSimpleStack/TheVpc/PublicSubnetSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"TheVpcPublicSubnetSubnet1RouteTableE3561FC1"},"subnetId":{"Ref":"TheVpcPublicSubnetSubnet1Subnet24F04F8D"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"McSimpleStack/TheVpc/PublicSubnetSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"TheVpcIGWF6739467"},"routeTableId":{"Ref":"TheVpcPublicSubnetSubnet1RouteTableE3561FC1"}}}}}},"PublicSubnetSubnet2":{"id":"PublicSubnetSubnet2","path":"McSimpleStack/TheVpc/PublicSubnetSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.215.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]},"children":{"Subnet":{"id":"Subnet","path":"McSimpleStack/TheVpc/PublicSubnetSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-2b","cidrBlock":"10.100.1.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"PublicSubnet"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"McSimpleStack/TheVpc/PublicSubnetSubnet2"}],"vpcId":{"Ref":"TheVpc7ED17D3E"}}}},"Acl":{"id":"Acl","path":"McSimpleStack/TheVpc/PublicSubnetSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"McSimpleStack/TheVpc/PublicSubnetSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"McSimpleStack/TheVpc/PublicSubnetSubnet2"}],"vpcId":{"Ref":"TheVpc7ED17D3E"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"McSimpleStack/TheVpc/PublicSubnetSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"TheVpcPublicSubnetSubnet2RouteTable1FDA37F0"},"subnetId":{"Ref":"TheVpcPublicSubnetSubnet2Subnet41D008D3"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"McSimpleStack/TheVpc/PublicSubnetSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"TheVpcIGWF6739467"},"routeTableId":{"Ref":"TheVpcPublicSubnetSubnet2RouteTable1FDA37F0"}}}}}},"IGW":{"id":"IGW","path":"McSimpleStack/TheVpc/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"McSimpleStack/TheVpc"}]}}},"VPCGW":{"id":"VPCGW","path":"McSimpleStack/TheVpc/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"TheVpcIGWF6739467"},"vpcId":{"Ref":"TheVpc7ED17D3E"}}}},"RestrictDefaultSecurityGroupCustomResource":{"id":"RestrictDefaultSecurityGroupCustomResource","path":"McSimpleStack/TheVpc/RestrictDefaultSecurityGroupCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.215.0","metadata":["*"]},"children":{"Default":{"id":"Default","path":"McSimpleStack/TheVpc/RestrictDefaultSecurityGroupCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.215.0"}}}}}},"Custom::VpcRestrictDefaultSGCustomResourceProvider":{"id":"Custom::VpcRestrictDefaultSGCustomResourceProvider","path":"McSimpleStack/Custom::VpcRestrictDefaultSGCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.215.0"},"children":{"Staging":{"id":"Staging","path":"McSimpleStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"Role":{"id":"Role","path":"McSimpleStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.215.0"}},"Handler":{"id":"Handler","path":"McSimpleStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.215.0"}}}},"TheEfs":{"id":"TheEfs","path":"McSimpleStack/TheEfs","constructInfo":{"fqn":"aws-cdk-lib.aws_efs.FileSystem","version":"2.215.0","metadata":[{"vpc":"*","removalPolicy":"retain","lifecyclePolicy":"AFTER_14_DAYS","performanceMode":"generalPurpose"}]},"children":{"Resource":{"id":"Resource","path":"McSimpleStack/TheEfs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_efs.CfnFileSystem","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EFS::FileSystem","aws:cdk:cloudformation:props":{"encrypted":true,"fileSystemPolicy":{"Statement":[{"Action":["elasticfilesystem:ClientRootAccess","elasticfilesystem:ClientWrite"],"Condition":{"Bool":{"elasticfilesystem:AccessedViaMountTarget":"true"}},"Effect":"Allow","Principal":{"AWS":"*"}}],"Version":"2012-10-17"},"lifecyclePolicies":[{"transitionToIa":"AFTER_14_DAYS"}],"performanceMode":"generalPurpose","fileSystemTags":[{"key":"Name","value":"McSimpleStack/TheEfs"}]}}},"EfsSecurityGroup":{"id":"EfsSecurityGroup","path":"McSimpleStack/TheEfs/EfsSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.215.0","metadata":[{"vpc":"*"},{"addIngressRule":["*",{},"*",false]}]},"children":{"Resource":{"id":"Resource","path":"McSimpleStack/TheEfs/EfsSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"McSimpleStack/TheEfs/EfsSecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"tags":[{"key":"Name","value":"McSimpleStack/TheEfs"}],"vpcId":{"Ref":"TheVpc7ED17D3E"}}}},"from McSimpleStackTheSecurityGroupE1F5B7F5:2049":{"id":"from McSimpleStackTheSecurityGroupE1F5B7F5:2049","path":"McSimpleStack/TheEfs/EfsSecurityGroup/from McSimpleStackTheSecurityGroupE1F5B7F5:2049","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow ECS access to EFS","fromPort":2049,"groupId":{"Fn::GetAtt":["TheEfsEfsSecurityGroupA38331A5","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["TheSecurityGroupC9867933","GroupId"]},"toPort":2049}}}}},"EfsMountTarget-PublicSubnetSubnet1":{"id":"EfsMountTarget-PublicSubnetSubnet1","path":"McSimpleStack/TheEfs/EfsMountTarget-PublicSubnetSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_efs.CfnMountTarget","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EFS::MountTarget","aws:cdk:cloudformation:props":{"fileSystemId":{"Ref":"TheEfsC46110DF"},"securityGroups":[{"Fn::GetAtt":["TheEfsEfsSecurityGroupA38331A5","GroupId"]}],"subnetId":{"Ref":"TheVpcPublicSubnetSubnet1Subnet24F04F8D"}}}},"EfsMountTarget-PublicSubnetSubnet2":{"id":"EfsMountTarget-PublicSubnetSubnet2","path":"McSimpleStack/TheEfs/EfsMountTarget-PublicSubnetSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_efs.CfnMountTarget","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EFS::MountTarget","aws:cdk:cloudformation:props":{"fileSystemId":{"Ref":"TheEfsC46110DF"},"securityGroups":[{"Fn::GetAtt":["TheEfsEfsSecurityGroupA38331A5","GroupId"]}],"subnetId":{"Ref":"TheVpcPublicSubnetSubnet2Subnet41D008D3"}}}}}},"Cluster":{"id":"Cluster","path":"McSimpleStack/Cluster","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.215.0","metadata":[{"vpc":"*","clusterName":"*","containerInsightsV2":"enhanced"},{"addAsgCapacityProvider":["*"]}]},"children":{"Resource":{"id":"Resource","path":"McSimpleStack/Cluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{"clusterName":"McSimpleStack-cluster","clusterSettings":[{"name":"containerInsights","value":"enhanced"}]}}},"Cluster":{"id":"Cluster","path":"McSimpleStack/Cluster/Cluster","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnClusterCapacityProviderAssociations","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::ClusterCapacityProviderAssociations","aws:cdk:cloudformation:props":{"capacityProviders":[{"Ref":"AsgCapacityProvider760D11D9"}],"cluster":{"Ref":"ClusterEB0386A7"},"defaultCapacityProviderStrategy":[]}}}}},"TheAsg":{"id":"TheAsg","path":"McSimpleStack/TheAsg","constructInfo":{"fqn":"aws-cdk-lib.aws_autoscaling.AutoScalingGroup","version":"2.215.0","metadata":[{"vpc":"*","instanceType":"*","machineImage":"*","userData":"*","minCapacity":"*","maxCapacity":"*"},{"protectNewInstancesFromScaleIn":[]},{"addUserData":["*"]},{"addToRolePolicy":[{}]},{"addToRolePolicy":[{}]},{"addToRolePolicy":[{}]}]},"children":{"InstanceSecurityGroup":{"id":"InstanceSecurityGroup","path":"McSimpleStack/TheAsg/InstanceSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.215.0","metadata":[{"vpc":"*","allowAllOutbound":true}]},"children":{"Resource":{"id":"Resource","path":"McSimpleStack/TheAsg/InstanceSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"McSimpleStack/TheAsg/InstanceSecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"tags":[{"key":"Name","value":"McSimpleStack/TheAsg"}],"vpcId":{"Ref":"TheVpc7ED17D3E"}}}}}},"InstanceRole":{"id":"InstanceRole","path":"McSimpleStack/TheAsg/InstanceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"roleName":"*","assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]}]},"children":{"ImportInstanceRole":{"id":"ImportInstanceRole","path":"McSimpleStack/TheAsg/InstanceRole/ImportInstanceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"McSimpleStack/TheAsg/InstanceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ec2.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AmazonElasticFileSystemClientFullAccess"]]}],"tags":[{"key":"Name","value":"McSimpleStack/TheAsg"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"McSimpleStack/TheAsg/InstanceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"McSimpleStack/TheAsg/InstanceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ecs:DeregisterContainerInstance","ecs:RegisterContainerInstance","ecs:Submit*"],"Effect":"Allow","Resource":{"Fn::GetAtt":["ClusterEB0386A7","Arn"]}},{"Action":["ecs:Poll","ecs:StartTelemetrySession"],"Condition":{"ArnEquals":{"ecs:cluster":{"Fn::GetAtt":["ClusterEB0386A7","Arn"]}}},"Effect":"Allow","Resource":"*"},{"Action":["ecr:GetAuthorizationToken","ecs:DiscoverPollEndpoint","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"TheAsgInstanceRoleDefaultPolicy67330A79","roles":[{"Ref":"TheAsgInstanceRole31535D2C"}]}}}}}}},"InstanceProfile":{"id":"InstanceProfile","path":"McSimpleStack/TheAsg/InstanceProfile","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnInstanceProfile","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::InstanceProfile","aws:cdk:cloudformation:props":{"roles":[{"Ref":"TheAsgInstanceRole31535D2C"}]}}},"ImportedInstanceProfile":{"id":"ImportedInstanceProfile","path":"McSimpleStack/TheAsg/ImportedInstanceProfile","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":[]}},"LaunchTemplate":{"id":"LaunchTemplate","path":"McSimpleStack/TheAsg/LaunchTemplate","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.LaunchTemplate","version":"2.215.0","metadata":[{"machineImage":"*","instanceType":"*","detailedMonitoring":false,"securityGroup":"*","userData":"*","associatePublicIpAddress":"*","spotOptions":"*","blockDevices":"*","instanceProfile":"*","keyPair":"*"}]},"children":{"Resource":{"id":"Resource","path":"McSimpleStack/TheAsg/LaunchTemplate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnLaunchTemplate","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::LaunchTemplate","aws:cdk:cloudformation:props":{"launchTemplateData":{"iamInstanceProfile":{"arn":{"Fn::GetAtt":["TheAsgInstanceProfile440EAEE6","Arn"]}},"imageId":{"Ref":"SsmParameterValueawsserviceecsoptimizedamiamazonlinux2recommendedimageidC96584B6F00A464EAD1953AFF4B05118Parameter"},"instanceType":"t3.medium","monitoring":{"enabled":false},"securityGroupIds":[{"Fn::GetAtt":["TheAsgInstanceSecurityGroup931623F4","GroupId"]}],"tagSpecifications":[{"resourceType":"instance","tags":[{"key":"Name","value":"McSimpleStack/TheAsg/LaunchTemplate"}]},{"resourceType":"volume","tags":[{"key":"Name","value":"McSimpleStack/TheAsg/LaunchTemplate"}]}],"userData":{"Fn::Base64":{"Fn::Join":["",["#!/bin/bash\necho ECS_CLUSTER=",{"Ref":"ClusterEB0386A7"}," >> /etc/ecs/ecs.config\nmkdir -p /mnt/efs\nmount -t efs ",{"Ref":"TheEfsC46110DF"},":/ /mnt/efs\necho \"",{"Ref":"TheEfsC46110DF"},":/ /mnt/efs efs defaults,_netdev 0 0\" >> /etc/fstab\necho ECS_CLUSTER=",{"Ref":"ClusterEB0386A7"}," >> /etc/ecs/ecs.config"]]}}},"tagSpecifications":[{"resourceType":"launch-template","tags":[{"key":"Name","value":"McSimpleStack/TheAsg/LaunchTemplate"}]}]}}}}},"ASG":{"id":"ASG","path":"McSimpleStack/TheAsg/ASG","constructInfo":{"fqn":"aws-cdk-lib.aws_autoscaling.CfnAutoScalingGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AutoScaling::AutoScalingGroup","aws:cdk:cloudformation:props":{"launchTemplate":{"launchTemplateId":{"Ref":"TheAsgLaunchTemplateC0804789"},"version":{"Fn::GetAtt":["TheAsgLaunchTemplateC0804789","LatestVersionNumber"]}},"maxSize":"1","minSize":"0","newInstancesProtectedFromScaleIn":true,"tags":[{"key":"Name","value":"McSimpleStack/TheAsg","propagateAtLaunch":true}],"vpcZoneIdentifier":[{"Ref":"TheVpcPublicSubnetSubnet1Subnet24F04F8D"},{"Ref":"TheVpcPublicSubnetSubnet2Subnet41D008D3"}]}}}}},"SsmParameterValue:--aws--service--ecs--optimized-ami--amazon-linux-2--recommended--image_id:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter":{"id":"SsmParameterValue:--aws--service--ecs--optimized-ami--amazon-linux-2--recommended--image_id:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","path":"McSimpleStack/SsmParameterValue:--aws--service--ecs--optimized-ami--amazon-linux-2--recommended--image_id:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.215.0"}},"SsmParameterValue:--aws--service--ecs--optimized-ami--amazon-linux-2--recommended--image_id:C96584B6-F00A-464E-AD19-53AFF4B05118":{"id":"SsmParameterValue:--aws--service--ecs--optimized-ami--amazon-linux-2--recommended--image_id:C96584B6-F00A-464E-AD19-53AFF4B05118","path":"McSimpleStack/SsmParameterValue:--aws--service--ecs--optimized-ami--amazon-linux-2--recommended--image_id:C96584B6-F00A-464E-AD19-53AFF4B05118","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":[]}},"AsgCapacityProvider":{"id":"AsgCapacityProvider","path":"McSimpleStack/AsgCapacityProvider","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.AsgCapacityProvider","version":"2.215.0"},"children":{"AsgCapacityProvider":{"id":"AsgCapacityProvider","path":"McSimpleStack/AsgCapacityProvider/AsgCapacityProvider","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCapacityProvider","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::CapacityProvider","aws:cdk:cloudformation:props":{"autoScalingGroupProvider":{"autoScalingGroupArn":{"Ref":"TheAsgASG1C2E5D7B"},"managedScaling":{"status":"ENABLED","targetCapacity":100},"managedTerminationProtection":"ENABLED"}}}}}},"TheSecurityGroup":{"id":"TheSecurityGroup","path":"McSimpleStack/TheSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.215.0","metadata":[{"vpc":"*","allowAllOutbound":true,"securityGroupName":"*"},{"addEgressRule":["*",{},"*",true]},{"addIngressRule":[{"canInlineRule":true,"connections":"*","uniqueId":"*"},{},"*",false]}]},"children":{"Resource":{"id":"Resource","path":"McSimpleStack/TheSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"McSimpleStack/TheSecurityGroup","groupName":"MCSimpleSG","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":25565,"toPort":25565,"description":"Allow MC TCP Port"}],"vpcId":{"Ref":"TheVpc7ED17D3E"}}}}}},"TheTaskDef":{"id":"TheTaskDef","path":"McSimpleStack/TheTaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Ec2TaskDefinition","version":"2.215.0","metadata":["*","*","*","*","*"]},"children":{"TaskRole":{"id":"TaskRole","path":"McSimpleStack/TheTaskDef/TaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}}]},"children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"McSimpleStack/TheTaskDef/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"McSimpleStack/TheTaskDef/TaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}}}},"Resource":{"id":"Resource","path":"McSimpleStack/TheTaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"cpu":1024,"essential":true,"image":"itzg/minecraft-server","memory":3072,"name":"TheContainer","portMappings":[{"containerPort":25565,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"TheTaskDefTheContainerLogGroup48D489C6"},"awslogs-stream-prefix":"MCSimple","awslogs-region":"us-east-2"}},"environment":[{"name":"AWS_REGION","value":"us-east-2"}]}],"executionRoleArn":{"Fn::GetAtt":["TheTaskDefExecutionRole258A6787","Arn"]},"family":"McSimpleStackTheTaskDef39C15B52","networkMode":"awsvpc","requiresCompatibilities":["EC2"],"taskRoleArn":{"Fn::GetAtt":["TheTaskDefTaskRole570DA6D1","Arn"]},"volumes":[{"host":{"sourcePath":"/mnt/efs/mcdata"},"name":"EfsVolume"}]}}},"TheContainer":{"id":"TheContainer","path":"McSimpleStack/TheTaskDef/TheContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.215.0"},"children":{"LogGroup":{"id":"LogGroup","path":"McSimpleStack/TheTaskDef/TheContainer/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"retention":"*"}]},"children":{"Resource":{"id":"Resource","path":"McSimpleStack/TheTaskDef/TheContainer/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{}}}}}}},"ExecutionRole":{"id":"ExecutionRole","path":"McSimpleStack/TheTaskDef/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"roleName":"*"},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"McSimpleStack/TheTaskDef/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"McSimpleStack/TheTaskDef/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"McSimpleStack/TheTaskDef/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"McSimpleStack/TheTaskDef/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["TheTaskDefTheContainerLogGroup48D489C6","Arn"]}}],"Version":"2012-10-17"},"policyName":"TheTaskDefExecutionRoleDefaultPolicyD920A76B","roles":[{"Ref":"TheTaskDefExecutionRole258A6787"}]}}}}}}}}},"TheService":{"id":"TheService","path":"McSimpleStack/TheService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Ec2Service","version":"2.215.0","metadata":["*","*"]},"children":{"Service":{"id":"Service","path":"McSimpleStack/TheService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"ClusterEB0386A7"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50},"desiredCount":1,"enableEcsManagedTags":false,"launchType":"EC2","networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"TheVpcPublicSubnetSubnet1Subnet24F04F8D"},{"Ref":"TheVpcPublicSubnetSubnet2Subnet41D008D3"}],"securityGroups":[{"Fn::GetAtt":["TheSecurityGroupC9867933","GroupId"]}]}},"schedulingStrategy":"REPLICA","taskDefinition":{"Ref":"TheTaskDef12D314F6"}}}}}},"MCServerAddress":{"id":"MCServerAddress","path":"McSimpleStack/MCServerAddress","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.215.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"McSimpleStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"McSimpleStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.215.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"McSimpleStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.215.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"McSimpleStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.215.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"}}}}}